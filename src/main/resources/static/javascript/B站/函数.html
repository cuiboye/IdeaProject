<html>
<head>
    <title>函数</title>
    <meta http-equiv="Content-Type" content="text/html;charset=gb2312">
    <script>
        /**
         * ==============================函数创建================================
         */
        /**
         * 创建函数：
         */
        var fun = new Function();

        /**
         * 可以将要封装的代码以字符串的形式传递给函数的构造方法,构造函数也是一个对象
         */
        var fun2 = new Function(console.log("封装函数"));//这种写法不建议用
        //调用函数：函数对象+()
        fun2();

        /**
         * 推荐使用下面的函数写法:
         * function 函数名(形参){
         *
         * }
         */
        function test(){

        }

        /**
         * 创建一个匿名函数赋值给一个函数:
         * var 函数名 = function(形参1，形参2...){
         *
         * }
         */
        var resutl3 = function (){
            console.log("我是匿名方法的函数")
        }

        resutl3();
        /**
         * ==============================函数的参数================================
         */
        /**
         * 可以在函数的()中指明一个或多个参数，参数之间用逗号分割
         */
        function xiangjia(a,b){
            console.log(a+b);
        }
        xiangjia(5,6);
        xiangjia(5);//如果实参的数量少于形参的数量，未赋值接受不了到的将会是undefied
        /**
         * 返回参数
         *      ---可以返回基本数据类型
         *      ---返回对象
         *      ---返回函数
         */
        //返回基本类型
        function add(a,b){
            return a+b;
        }
        var result = add(5,6);//函数返回什么，这里result接收的就是什么，如果函数中不写return，就会返回一个undefined
        console.log(result+"===");
        //返回对象
        function returnObj(){
            var obj = {name:"张飞",age:50};
            return obj;
        }
        function returnObj2(){
            return {name:"张飞",age:50};//返回一个对象也可以这样写
        }
        console.log(returnObj());
        console.log(returnObj2());

        //函数中调用函数
        function test(){
            function test2(){
                console.log("test2")
            }
            test2();
        }
        test();
        //调用一个函数
        //上面写法和下面的一样：
        function test3(){
            function test4(){
                console.log("test4");
            }
            return test4;//注意，这里返回是对象，不是方法
        }
        //如果是返回函数，下面两种调用方式都可以
        //1.
        // var m = test3();
        // m();
        //2.
        test3()();

        /**
         * 立即执行函数：函数只想执行一次，使用 (匿名函数)();
         */
        (function showAlert() {
                console.log("立即执行函数");
            })();
        //立即执行函数还可以传递参数：
        (function showAlert(a,b) {
            console.log(a+b);
        })(123,456);

        /**
         * 为对象的属性赋值一个函数：
         * 如果一个函数作为一个对象的属性，那么我们称这个函数是这个对象的方法，调用函数就是调用这个对象的方法；
         * 调用对象的函数是指调用对象的纯方法（没有用属性名接收方法）
         */
        var animal = new Object();
        animal.weight = 50;
        animal.age = function (){
            console.log("animal age is 10");
        };
        animal.age();//调用对象的函数属性
        //上面和下面的写法是一样的
        var animal2 = {
            weight:"50",
            age:function (){
                console.log("animal2 age is 10");
            }
        };
        animal2.age();

        /**
         * 从对象中遍历取出属性
         */
        var animal3 = {
            name:"关羽",
            age:30,
            height:180
        }
        for(var n in animal3){
            console.log("key："+n);//这里的n是key,而不是value
            console.log("value:"+animal3[n]);//这里是取value，不能使用animal3.n的方式取value
        }

        /**
         * 全局作用变量  window,可以直接使用，它由浏览器创建，创建的变量都会作为window对象的属性存在
         */
        var outerValue = 20;
        function m(){
            var innerValue = 10;
        }
        m();
        window.m();//函数也会作为window对象的方法保存,这样使用和 m() 是一样的
        console.log(window.innerValue);//错误，window不能引用成员函数内的变量
        console.log(window.outerValue);//正确

        //window的用处：
        var k = 10;
        function t(){
            var k = 20;
            console.log("k的值为："+window.k);//这里引用的是外面的变量，输出额值为10
        }
        t();
        /**
         * 上面的代码如果函数t()内的k没有用var声明，那么这个k是全局的，使用了var才是局部的变量
         */

        /**
         * 变量声明提前,使用var声明的变量会提前到最前面
         */
        //1)情况1
        // console.log(mm);
        // var mm = 15;
        //上面的就相当于
        var mm;
        console.log(mm);//所以这里会输出 undefined
        mm = 15;

        //2）情况2
        // console.log(mm2);//这里会报错，因为mm2没有用var声明
        // mm2 = 15;

        //由此引出下面的函数声明提升

        //3）情况3
        mm3();//调用函数放在这里不会报错，是因为下面的 mm3()函数是在所有代码之前就声明了
        function mm3(){
            console.log("mm3");
        }

        //4）情况4
        // mm4();//这里会报错，使用下面var接收函数，虽然var mm4()声明提前了，但是没有复制，这里调用提前了，mm4是undefined，所以会报错，注意这里和变量提升是有所区别的
        // var mm4() = function (){
        //     console.log("mm4");
        // }

    </script>
</head>
<body>

</body>
</html>